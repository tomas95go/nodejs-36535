<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>e-commerce</title>
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.1.3/dist/darkly/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">

    {{> navigation/navbar }}
    <div class="container mt-5">
        {{{body}}}
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const $chatMessage = document.getElementById("chat-messages");
        const $newMessageForm = document.getElementById("new-message-form"); 
        const $newMessageInput = document.getElementById("new-message-input");
        $newMessageForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if ($newMessageInput.value) {
                socket.emit('chat message', $newMessageInput.value);
                $newMessageInput.value = '';
            }
        });
        socket.on('chat message', function(msg) {
            const $newMessage = document.createElement('li');
            $newMessage.classList.add('list-group-item');
            $newMessage.textContent = msg;
            $chatMessage.appendChild($newMessage);
            window.scrollTo(0, document.body.scrollHeight);
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</body>
</html>